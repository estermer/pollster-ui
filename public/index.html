<!DOCTYPE html>
<html ng-app="pollster">
  <head>
    <meta charset="utf-8">
    <title>Pollster App</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css" media="screen" title="no title">
    <!-- ANGULAR/JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <script src="js/app.js" charset="utf-8"></script>

  </head>
  <body ng-controller="MainCtrl as main">

    <div id="create-form">
      <div ng-show="!main.pollCreated">
        <form id="new-poll" ng-submit="main.createPoll(poll)">
          <label for="title">Poll Title: </label>
          <input type="text" name="title" ng-model="poll.title">
          <label for="question">What is your poll question: </label>
          <input type="text" name="question" ng-model="poll.question">
          <button type="submit">NEXT >></button>
        </form>
      </div>
      <div ng-show="main.pollCreated">
        <form id="new-poll" ng-submit="main.createAnswers(answers)">
          <label for="answers">List your responses: </label><br>
          <input type="text" name="answers" ng-model="answers.one"><br>
          <input type="text" name="answers" ng-model="answers.two"><br>
          <input type="text" name="answers" ng-model="answers.three"><br>
          <input type="text" name="answers" ng-model="answers.four"><br>
          <input type="text" name="answers" ng-model="answers.five"><br>
          <input type="text" name="answers" ng-model="answers.six"><br>
          <button type="submit">CREATE</button>
        </form>
      </div>
    </div>

    <!-- Results will be displayed here -->
    <div class="show-results" ng-if="main.showResults" >
      <h3>{{main.currentPollResults.title}}</h3>
      <span ng-repeat="answer in main.pollAnswers">{{answer.text}}: {{answer.responses}}<br></span>
      <button ng-click="main.hideResults()">HIDE RESULTS</button>
    </div>

    <!-- polls will be displayed here -->
    <div id="show-polls" ng-repeat="poll in main.polls">
      <div class="poll">
        <button class="delete" ng-click="main.deletePoll(poll.id)">X</button>
        <h3>{{poll.title}}</h3>
        <h5>{{poll.question}}</h5>
        <form ng-submit="main.recordResponse(response, poll.id)">
          <span class="answers" >
            <label ng-repeat="answer in poll.answers">
              <input type="radio" ng-model="$parent.response" ng-value="answer.id">
              {{answer.text}}
              <br>
            </label>
          </span>
          <span ng-attr-id="{{poll.id}}">
            <button type="submit">RECORD YOUR RESPONSE</button>
          </span>
        </form>
        <button ng-click="main.getResults(poll.id)">SHOW RESULTS</button>
      </div>
    </div>












  </body>
</html>
